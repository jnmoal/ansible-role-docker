stages:
  - test

before_script:
  - vagrant plugin install vagrant-vbguest

check_synthaxe:
  stage: test
  script:
    - ansible-playbook tests/test.yml -i test/inventory --syntax-check

test_fedora:
  stage: test
  script:
    - echo "Testing on fedora machine"
    - vagrant up fedora
    - vagrant ssh fedora -c "ansible-playbook /vagrant/tests/test.yml -c local"
    - vagrant ssh fedora -c "docker run hello-world"
    - vagrant destroy -f fedora
  after_script:
    - vagrant destroy -f fedora
